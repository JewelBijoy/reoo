<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <title>USTREO Neo4j Graph</title>
    <link rel="icon" href="static/favicon.ico" />

    <!-- Add Popoto default CSS styles -->
    <link rel="stylesheet" href="static/modules/popoto/dist/popoto.min.css">
    <link rel="stylesheet" href="static/shared.css">
</head>

<body class="ppt-body">

    <section class="ppt-section-main" style="height: 900px">
        <div class="ppt-section-header">
            <span class="ppt-header-span">USTREO Neo4j graph -</span> graph example
        </div>

        <!-- By default the graph is generated on the HTML element with ID "popoto-graph"
     If needed this id can be modified with property "popoto.graph.containerId" -->

        <div id="popoto-graph" class="ppt-div-graph">
            <!-- Graph is generated here -->
        </div>

    </section>

    <!-- Required scripts -->
    <script src="static/shared.js" charset="utf-8"></script>
    <script src="static/modules/d3/dist/d3.min.js" charset="utf-8"></script>
    <script src="static/modules/neo4j-driver-lite/lib/browser/neo4j-lite-web.min.js" charset="utf-8"></script>
    <script src="static/modules/popoto/dist/popoto.min.js" charset="utf-8"></script>
    <script>

        var driver = neo4j.driver(
            "neo4j+s://fbd331ed.databases.neo4j.io",
            neo4j.auth.basic("neo4j", "4ebwFjta0RPhkNs-Ea6IPcNUPFSrI_DV-ZEBUxArqzQ"),
        );

        popoto.runner.DRIVER = driver

        // Define the list of label provider to customize the graph behavior:
        // Only two labels are used in Neo4j movie graph example: "Movie" and "Person"
        popoto.provider.node.Provider = {
            "BusinessService": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TeamName": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "PrimaryLocation": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "SecondaryLocation": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ThirdParty": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ThirdPartyName": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Scenario": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ScenarioName": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Facility": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "OfficePL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "OfficeSL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "People": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TeamPL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TeamSL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ITHead": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "BusinessSponsor": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ImportantBusinessService": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Process": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Function": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Technical": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Application": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ApplicationName": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Area": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "AttrDesc": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataAccessPL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataAccessSL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataAtrributes": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataCategory": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataEntity": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataObject": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ApplicationInventoryAvailable": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataSets": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataStoragePL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataStorageSL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "DataSubject": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Description": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "EntityDesc": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ExpectedTime": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Hosting": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "InfrastructureOwner": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "IsVulnerable": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "MainDatastoreName": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "MaximumToleranceLevel": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "MinimumToleranceLevel": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "NumberofCriticalApplications": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "PrimarySponsor": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "ProcessMapsAvailability": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "RiskAppetite": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Service": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "SubDesc": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Synonyms": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "SubDesc": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TPPL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TPSL": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TestCaseDescription": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TestResult": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TestStatus": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TestType": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "TotalNumberofApplications": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            },
            "Vulnerabilities": {
                "returnAttributes": ["name"],
                "constraintAttribute": "name"
            }


        };


        var schema =

        {
            label: "Function",
            rel: [
            {
            label: "SERVICE",
                target: {
                label: "Service",
                    rel: [
                        {
                            label: "BUSINESSSERVICE",
                            target: {
                                label: "BusinessService",
                                rel: [
                                    {
                                        label: "PEOPLE",
                                        target: {
                                            label: "People",

                                            rel: [
                                                {
                                                    label: "TEAMNAME",
                                                    target: {
                                                        label: "TeamName"

                                                    }
                                                }
                                            ]
                                        }


                                    },
                                    {
                                        label: "THIRDPARTY",
                                        target: {
                                            label: "ThirdParty",
                                            rel: [
                                                {
                                                    label: "THIRDPARTYNAME",
                                                    target: {
                                                        label: "ThirdPartyName"

                                                    }
                                                }

                                            ]
                                        }
                                    },
                                    {
                                        label: "SCENARIOS",
                                        target: {
                                            label: "Scenario",
                                            rel: [
                                                {
                                                    label: "SCENARIONAME",
                                                    target: {
                                                        label: "ScenarioName"

                                                    }
                                                }

                                            ]

                                        }
                                    },
                                    {
                                        label: "FACILITY",
                                        target: {
                                            label: "Facility",
                                            rel: [
                                                {
                                                    label: "OFFICEPL",
                                                    target: {
                                                        label: "OfficePL"

                                                    }
                                                },
                                                {
                                                    label: "OFFICESL",
                                                    target: {
                                                        label: "OfficeSL"

                                                    }
                                                }

                                            ]

                                        }
                                    },
                                    {
                                        label: "APPLICATION",
                                        target: {
                                            label: "Application",
                                            rel: [
                                                {
                                                    label: "APPLICATIONNAME",
                                                    target: {
                                                        label: "ApplicationName",
                                                        rel: [
                                                            {
                                                                label: "MAINDATASTORENAME",
                                                                target: {
                                                                    label: "MainDatastoreName"

                                                                }
                                                            }
                                                        ]

                                                    }
                                                }]
                                        }
                                    },
                                    {
                                        label: "TECHNOLOGY",
                                        target: {
                                            label: "Technical",

                                        }
                                    }


                                ]
                            }
                        }]
            }



        }
            ]
        }
        ;

        driver.verifyConnectivity().then(function () {
            // Start the generation using parameter as root label of the query.
            popoto.start(schema);
        }).catch(function (error) {
            document.getElementById("modal").style.display = "block";
            document.getElementById("error-content").innerText = error;
            console.error(error)
        })

    </script>
</body>

</html>